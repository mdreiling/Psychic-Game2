<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Psychic Game 2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
</head>
<body>
    
    <h1>The Psychic Game! (v2)</h1>

    <div>
        <p id="directions-text"><b>Can you guess what letter I'm thinking of?</b></p>
        <input id="gameReset-button" type="button" onclick="gameReset()" value="Click here to Start Playing!">
        <p id="roundResult-text"></p>
        <p id="wins-text"></p>
        <p id="losses-text"></p>
        <p id="guessesRemaining-text"></p>
        <p id="userGuesses-text"></p>
    </div>

</body>

<script>

// Variables 
// ======================================

//Array of possible computer choices.
var computerChoices = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

// Array of user guesses
var userGuesses = [];

// Declaring variables for wins, losses, starting guesses, and remaining guesses.
var wins = 0;
var losses = 0;
var startingGuesses = 9;
var remainingGuesses = startingGuesses;
var roundResultText = "Please play a round first.";

// Declaring variables that hold references to HTML items.
var directionsText = document.querySelector("#directions-text"); 
var winsText = document.querySelector("#wins-text");
var lossesText = document.querySelector("#losses-text");
var guessesRemainingText = document.querySelector("#guessesRemaining-text");
var userGuessesText = document.querySelector("#userGuesses-text");
var roundResultText = document.querySelector("#roundResultText");
var gameResetButton = document.querySelector("#gameReset-button");
var roundResult = "No round has been played yet.";
var computerSelection = "";

// Functions 
// ======================================

// Game Reset Function to reset computer choice.
function gameReset() {
    computerSelection = computerChoices[Math.floor(Math.random() * computerChoices.length)];
    winsText.textContent = "Wins: " + wins;
    lossesText.textContent = "Losses: " + losses;
    guessesRemainingText.textContent = "Guesses remaining: " + remainingGuesses;
    userGuessesText.textContent = "Your guesses so far: " + userGuesses;
    gameResetButton.textContent = "Click here to play another round!";
    roundResultText.textContent = "The result of the previous round was: " + roundResult;
    console.log("Computer selected "+ computerSelection);
    remainingGuesses = startingGuesses;
    userGuesses = [];
};

// Main Process 
// ===================================

// Function to run whenver the user presses a key.
document.onkeyup = function(event) {

    // Determines which key was pressed.
    var userGuess = event.key;

    if (userGuess === "a" || userGuess === "b" || userGuess === "c" || userGuess === "d" || userGuess === "e" || userGuess === "f" || userGuess === "g" || userGuess === "h" || userGuess === "i" || userGuess === "j" || userGuess === "k" || userGuess === "l" || userGuess === "m" || userGuess === "n" || userGuess === "o" || userGuess === "p" || userGuess === "q" || userGuess === "r" || userGuess === "s" || userGuess === "t" || userGuess === "u" || userGuess === "v" || userGuess === "w" || userGuess === "x" || userGuess === "y" || userGuess === "z") {
            
            // Compares User Guess and Computer Selection and writes results to console.log.
            if (userGuess===computerSelection) {
                console.log("You win!")
                wins++;
                roundResult = "won!";
                // gameReset();

            }  else if (remainingGuesses > 1) {
                console.log("You selected " + userGuess + " | Computer picked " + computerSelection)
                remainingGuesses--;
                userGuesses.push(" " + userGuess);
            
            }   else {
                losses++;
                roundResult = "loss.";
            }

    } else {
        console.log("Please enter a letter to make a guess.")
    };

    winsText.textContent = "Wins: " + wins;
    lossesText.textContent = "Losses: " + losses;
    guessesRemainingText.textContent = "Guesses remaining: " + remainingGuesses;
    userGuessesText.textContent = "Your guesses so far: " + userGuesses;

};

</script>

<script type="text/javascript" src="assets/javascript/game.js"></script>

</html>